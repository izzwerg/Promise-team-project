{"version":3,"file":"commonHelpers2.js","sources":["../src/main.js","../src/js/footer.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { openModal } from './js/modal/openModal';\n\nconst exercisesWrapper = document.querySelector('.wrapper-exercises');\nconst paginationWrapper = document.querySelector('.pagination-wrapper');\nconst muscleBtn = document.getElementById('muscle-btn');\nconst bodyBtn = document.getElementById('body-btn');\nconst equipmentBtn = document.getElementById('equipment-btn');\nconst partHeader = document.querySelector('.exercises-title');\nconst searchPlace = document.querySelector('.search-container');\n\nlet currentFilter = 'Muscles';\n\nlet selectedBtn = 'muscle-btn';\n\nlet totalPages;\nlet page = 1;\nlet dataList;\nlet exerciseName;\nlet exercisePage = 1;\n\n[muscleBtn, bodyBtn, equipmentBtn].forEach(btn => {\n  btn.addEventListener('click', function () {\n    if (selectedBtn !== btn.id) {\n      changeActiveBtn(btn.id);\n      selectedBtn = btn.id;\n      page = 1;\n      if (btn.id === 'muscle-btn') {\n        currentFilter = 'Muscles';\n      }\n      if (btn.id === 'body-btn') {\n        currentFilter = 'Body parts';\n      }\n      if (btn.id === 'equipment-btn') {\n        currentFilter = 'Equipment';\n      }\n      getExercises();\n    }\n  });\n});\n\nfunction changeActiveBtn(id) {\n  [muscleBtn, bodyBtn, equipmentBtn].forEach(btn => {\n    btn.className = `exercises-category ${id === btn.id ? 'active' : ''}`;\n  });\n}\n\ngetExercises();\n\nasync function getExercises() {\n  const apiUrl = 'https://energyflow.b.goit.study/api/filters';\n  const requestData = {\n    filter: currentFilter,\n    limit: setLimit(),\n    page,\n  };\n\n  try {\n    const response = await axios.get(\n      `${apiUrl}?${new URLSearchParams(requestData)}`\n    );\n    exercisesWrapper.innerHTML = `<div class=\"muscles-list\"></div>`;\n    dataList = response.data.results;\n    totalPages = response.data.totalPages;\n    renderExercises();\n    setPagination();\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong. Please try again later.`,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction renderExercises() {\n  const newData = dataList\n    .map(\n      item => `<div class=\"muscle-item\" \n       style=\"background-image: linear-gradient(rgba(16, 16, 16, 0.7), rgba(16, 16, 16, 0.7)), url(${\n         item.imgUrl\n       })\" ><div class=\"muscle-item-wrapper\">\n          <span class=\"muscle-category\">${capitalizeText(item.name)}</span>\n           <span class=\"muscle-item-category\">${item.filter}</span></div>\n           </div>`\n    )\n    .join('');\n  const muscleList = document.querySelector('.muscles-list');\n  muscleList.innerHTML = newData;\n  muscleList.classList.remove('desk-flex');\n  muscleList.classList.remove('tab-flex');\n  searchPlace.classList.add('is-hidden');\n  partHeader.innerHTML = 'Exercises';\n  getByFilter(muscleList);\n  exercisePage = 1;\n}\n\nfunction setPagination() {\n  paginationWrapper.classList.remove(\"scroll-x\");\n  if (totalPages > 1) {\n  const paginationList = [];\n  for (let i = 1; i <= totalPages; i++) {\n    paginationList.push(\n      `<span class=\"pagination-number ${\n        i === page ? 'active' : ''\n      }\">${i}</span>`\n    );\n  }\n  paginationWrapper.innerHTML = paginationList.join('');\n  const paginationNumbers =\n    document.getElementsByClassName('pagination-number');\n  for (let i = 0; i < paginationNumbers.length; i++) {\n    paginationNumbers[i].addEventListener('click', function () {\n      changePagination(i + 1);\n    });\n  }\n} else {\n  paginationWrapper.innerHTML = '';\n}\n}\n\nfunction changePagination(newPageNumber) {\n  if (newPageNumber === page) {\n    return;\n  }\n  page = newPageNumber;\n  getExercises();\n}\n\nfunction capitalizeText(text) {\n  if (!text.length) {\n    return '';\n  }\n  const firstLetter = text.charAt(0);\n  const firstLetterCap = firstLetter.toUpperCase();\n  const remainingLetters = text.slice(1);\n  return firstLetterCap + remainingLetters;\n}\nfunction setLimit() {\n  if (window.screen.width >= 768) {\n    return 12;\n  }\n  return 8;\n}\n\nfunction getByFilter(muscleList) {\n  const exerciseTargets = muscleList.querySelectorAll('.muscle-item');\n  exerciseTargets.forEach(exerciseTarget =>\n    exerciseTarget.addEventListener('click', function () {\n      const targetName = exerciseTarget.querySelector('.muscle-category');\n      exerciseName = targetName.textContent.toLowerCase();\n      getFilteredExerrcises();\n    })\n  );\n}\n\nasync function getFilteredExerrcises() {\n  const apiUrl = 'https://energyflow.b.goit.study/api/exercises';\n  let filterCheck = document.querySelector('.active');\n  let requestData;\n  if (filterCheck.textContent == 'Body parts') {\n    requestData = {\n      bodypart: exerciseName,\n      limit: setExercisesLimit(),\n      page: exercisePage,\n    };\n  }\n  if (filterCheck.textContent == 'Muscles') {\n    requestData = {\n      muscles: exerciseName,\n      limit: setExercisesLimit(),\n      page: exercisePage,\n    };\n  }\n  if (filterCheck.textContent == 'Equipment') {\n    requestData = {\n      equipment: exerciseName,\n      limit: setExercisesLimit(),\n      page: exercisePage,\n    };\n  }\n\n  try {\n    const response = await axios.get(\n      `${apiUrl}?${new URLSearchParams(requestData)}`\n    );\n    exercisesWrapper.innerHTML = `<div class=\"muscles-list\"></div>`;\n    dataList = response.data.results;\n    totalPages = response.data.totalPages;\n\n    renderFilteredExercises();\n    setFilteredPagination();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong. Please try again later.`,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction setExercisesLimit() {\n  if (window.screen.width >= 1440) {\n    return 9;\n  }\n  return 8;\n}\n\nfunction renderFilteredExercises() {\n  const newData = dataList\n    .map(\n      item => `<div class=\"filtered-ex-item\">\n      <div class=\"filtered-ex-item-header\">\n          <div class=\"filtered-workout-box\">\n              <p class=\"filtered-workout-text\">workout</p>\n          </div>\n          <div class=\"filtered-rating-container\">\n              <p class=\"filtered-rating-text\">${Number(item.rating).toFixed(\n                1\n              )}</p>\n              <div class=\"filtered-rating-icon-container\">\n              <svg class=\"filtered-rating-icon\" width=\"14\" height=\"14\">\n                  <use href=\"./assets/sprite-a52c12ca.svg#star\"></use>\n              </svg>\n              </div>\n          </div>\n          <button class=\"filtered-start-ex-btn\" type=\"button\" data-id=\"${item._id}\">Start\n              <svg class=\"filtered-start-arrow-icon\" width=\"14\" height=\"14\">\n                  <use href=\"./assets/sprite-a52c12ca.svg#arrow\"></use>\n              </svg>\n          </button>\n      </div>\n      <div class=\"filtered-ex-name-box\">\n          <div class=\"filtered-run-icon-box\">\n              <svg class=\"filtered-run-icon\" width=\"16\" height=\"16\">\n                  <use href=\"./assets/sprite-a52c12ca.svg#runner\"></use>\n              </svg>\n          </div>\n          <p class=\"filtered-ex-name\">${capitalizeText(item.name)}</p>\n      </div>\n      <ul class=\"filtered-ex-desc-list\">\n          <li class=\"filtered-ex-desc-item\">Burned calories:\n              <span class=\"filtered-ex-desc-value\">${item.burnedCalories} / ${\n        item.time\n      } min</span>\n          </li>\n          <li class=\"filtered-ex-desc-item\">Body part:\n              <span class=\"filtered-ex-desc-value\">${capitalizeText(\n                item.bodyPart\n              )}</span>\n          </li>\n          <li class=\"filtered-ex-desc-item\">Target:\n              <span class=\"filtered-ex-desc-value\">${capitalizeText(\n                item.target\n              )}</span>\n          </li>\n      </ul>\n  </div>`\n    )\n    .join('');\n  const muscleList = document.querySelector('.muscles-list');\n  muscleList.innerHTML = newData;\n  openModal();\n  if (exercisePage === 1 && partHeader.textContent === \"Exercises\") {partHeader.insertAdjacentHTML(\n    'beforeend',\n    ` / <span class=\"exercises-title-grey\">${capitalizeText(\n      dataList[0].bodyPart\n    )}</span>`\n  );}\n  searchPlace.classList.remove('is-hidden');\n  if (window.screen.width >= 1440) {\n    muscleList.classList.add('desk-flex');\n  }\n  if (window.screen.width >= 768 && window.screen.width < 1440) {\n    muscleList.classList.add('tab-flex');\n  }\n}\n\nfunction setFilteredPagination() {\n  const paginationList = [];\n  paginationWrapper.classList.remove(\"scroll-x\");\n  if (totalPages > 1) {\n    for (let i = 1; i <= totalPages; i++) {\n      paginationList.push(\n        `<span class=\"pagination-number ${\n          i === exercisePage ? 'active' : ''\n        }\">${i}</span>`\n      );\n    }\n    paginationWrapper.innerHTML = paginationList.join('');\n    const paginationNumbers =\n      document.getElementsByClassName('pagination-number');\n    for (let i = 0; i < paginationNumbers.length; i++) {\n      paginationNumbers[i].addEventListener('click', function () {\n        changeFilteredPagination(i + 1);\n      });\n    }\n    if (totalPages > 12 && window.screen.width < 768) {\n      paginationWrapper.classList.add(\"scroll-x\");\n    } else if (totalPages > 23 && window.screen.width < 1440) {\n      paginationWrapper.classList.add(\"scroll-x\");\n    }\n  } else {\n    paginationWrapper.innerHTML = '';\n  }\n}\n\nfunction changeFilteredPagination(newPageNumber) {\n  if (newPageNumber === exercisePage) {\n    return;\n  }\n  exercisePage = newPageNumber;\n  getFilteredExerrcises();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst subscriptionForm = document.getElementById('subscriptionForm');\nconst userSubmit = document.getElementById('user-submit');\n\nconst BASE_URL = 'https://energyflow.b.goit.study/api/subscription';\n\nsubscriptionForm.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  const userEmail = userSubmit.value;\n\n  if (!validateEmail(userEmail)) {\n    iziToast.info({\n      title: 'Info',\n      message: 'Enter a valid email',\n    });\n    return;\n  }\n\n  try {\n    const response = await axios.post(BASE_URL, { email: userEmail });\n    subscriptionForm.reset();\n    if (response.status === 201) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          \"We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Energy Flow. You've just taken a significant step towards improving your fitness and well-being.\",\n      });\n    }\n  } catch (response) {\n    if (response.message === 'Request failed with status code 409') {\n      subscriptionForm.reset();\n      iziToast.info({\n        title: 'Info',\n        message: 'Subscription already exists',\n      });\n      return;\n    } else {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, an error occurred while verifying an email. Please try again!',\n      });\n    }\n  }\n}\n\nfunction validateEmail(email) {\n  const regex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  return regex.test(email);\n}\n"],"names":["exercisesWrapper","paginationWrapper","muscleBtn","bodyBtn","equipmentBtn","partHeader","searchPlace","currentFilter","selectedBtn","totalPages","page","dataList","exerciseName","exercisePage","btn","changeActiveBtn","getExercises","id","apiUrl","requestData","setLimit","response","axios","renderExercises","setPagination","error","iziToast","newData","item","capitalizeText","muscleList","getByFilter","paginationList","i","paginationNumbers","changePagination","newPageNumber","text","firstLetterCap","remainingLetters","exerciseTarget","getFilteredExerrcises","filterCheck","setExercisesLimit","renderFilteredExercises","setFilteredPagination","openModal","changeFilteredPagination","subscriptionForm","userSubmit","BASE_URL","onFormSubmit","event","userEmail","validateEmail","email"],"mappings":"sGAKA,MAAMA,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAoB,SAAS,cAAc,qBAAqB,EAChEC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAc,SAAS,cAAc,mBAAmB,EAE9D,IAAIC,EAAgB,UAEhBC,EAAc,aAEdC,EACAC,EAAO,EACPC,EACAC,EACAC,EAAe,EAEnB,CAACX,EAAWC,EAASC,CAAY,EAAE,QAAQU,GAAO,CAChDA,EAAI,iBAAiB,QAAS,UAAY,CACpCN,IAAgBM,EAAI,KACtBC,EAAgBD,EAAI,EAAE,EACtBN,EAAcM,EAAI,GAClBJ,EAAO,EACHI,EAAI,KAAO,eACbP,EAAgB,WAEdO,EAAI,KAAO,aACbP,EAAgB,cAEdO,EAAI,KAAO,kBACbP,EAAgB,aAElBS,IAEN,CAAG,CACH,CAAC,EAED,SAASD,EAAgBE,EAAI,CAC3B,CAACf,EAAWC,EAASC,CAAY,EAAE,QAAQU,GAAO,CAChDA,EAAI,UAAY,sBAAsBG,IAAOH,EAAI,GAAK,SAAW,EAAE,EACvE,CAAG,CACH,CAEAE,IAEA,eAAeA,GAAe,CAC5B,MAAME,EAAS,8CACTC,EAAc,CAClB,OAAQZ,EACR,MAAOa,EAAU,EACjB,KAAAV,CACJ,EAEE,GAAI,CACF,MAAMW,EAAW,MAAMC,EAAM,IAC3B,GAAGJ,CAAM,IAAI,IAAI,gBAAgBC,CAAW,CAAC,EACnD,EACInB,EAAiB,UAAY,mCAC7BW,EAAWU,EAAS,KAAK,QACzBZ,EAAaY,EAAS,KAAK,WAC3BE,IACAC,GACD,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASH,GAAkB,CACzB,MAAMI,EAAUhB,EACb,IACCiB,GAAQ;AAAA,qGAELA,EAAK,MACN;AAAA,0CACkCC,EAAeD,EAAK,IAAI,CAAC;AAAA,gDACnBA,EAAK,MAAM;AAAA,kBAEtD,EACA,KAAK,EAAE,EACJE,EAAa,SAAS,cAAc,eAAe,EACzDA,EAAW,UAAYH,EACvBG,EAAW,UAAU,OAAO,WAAW,EACvCA,EAAW,UAAU,OAAO,UAAU,EACtCxB,EAAY,UAAU,IAAI,WAAW,EACrCD,EAAW,UAAY,YACvB0B,EAAYD,CAAU,EACtBjB,EAAe,CACjB,CAEA,SAASW,GAAgB,CAEvB,GADAvB,EAAkB,UAAU,OAAO,UAAU,EACzCQ,EAAa,EAAG,CACpB,MAAMuB,EAAiB,CAAA,EACvB,QAASC,EAAI,EAAGA,GAAKxB,EAAYwB,IAC/BD,EAAe,KACb,kCACEC,IAAMvB,EAAO,SAAW,EAChC,KAAWuB,CAAC,SACZ,EAEEhC,EAAkB,UAAY+B,EAAe,KAAK,EAAE,EACpD,MAAME,EACJ,SAAS,uBAAuB,mBAAmB,EACrD,QAASD,EAAI,EAAGA,EAAIC,EAAkB,OAAQD,IAC5CC,EAAkBD,CAAC,EAAE,iBAAiB,QAAS,UAAY,CACzDE,EAAiBF,EAAI,CAAC,CAC5B,CAAK,CAEL,MACEhC,EAAkB,UAAY,EAEhC,CAEA,SAASkC,EAAiBC,EAAe,CACnCA,IAAkB1B,IAGtBA,EAAO0B,EACPpB,IACF,CAEA,SAASa,EAAeQ,EAAM,CAC5B,GAAI,CAACA,EAAK,OACR,MAAO,GAGT,MAAMC,EADcD,EAAK,OAAO,CAAC,EACE,cAC7BE,EAAmBF,EAAK,MAAM,CAAC,EACrC,OAAOC,EAAiBC,CAC1B,CACA,SAASnB,GAAW,CAClB,OAAI,OAAO,OAAO,OAAS,IAClB,GAEF,CACT,CAEA,SAASW,EAAYD,EAAY,CACPA,EAAW,iBAAiB,cAAc,EAClD,QAAQU,GACtBA,EAAe,iBAAiB,QAAS,UAAY,CAEnD5B,EADmB4B,EAAe,cAAc,kBAAkB,EACxC,YAAY,cACtCC,GACN,CAAK,CACL,CACA,CAEA,eAAeA,GAAwB,CACrC,MAAMvB,EAAS,gDACf,IAAIwB,EAAc,SAAS,cAAc,SAAS,EAC9CvB,EACAuB,EAAY,aAAe,eAC7BvB,EAAc,CACZ,SAAUP,EACV,MAAO+B,EAAmB,EAC1B,KAAM9B,CACZ,GAEM6B,EAAY,aAAe,YAC7BvB,EAAc,CACZ,QAASP,EACT,MAAO+B,EAAmB,EAC1B,KAAM9B,CACZ,GAEM6B,EAAY,aAAe,cAC7BvB,EAAc,CACZ,UAAWP,EACX,MAAO+B,EAAmB,EAC1B,KAAM9B,CACZ,GAGE,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAC3B,GAAGJ,CAAM,IAAI,IAAI,gBAAgBC,CAAW,CAAC,EACnD,EACInB,EAAiB,UAAY,mCAC7BW,EAAWU,EAAS,KAAK,QACzBZ,EAAaY,EAAS,KAAK,WAE3BuB,IACAC,GACD,MAAe,CACdnB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASiB,GAAoB,CAC3B,OAAI,OAAO,OAAO,OAAS,KAClB,EAEF,CACT,CAEA,SAASC,GAA0B,CACjC,MAAMjB,EAAUhB,EACb,IACCiB,GAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAMkC,OAAOA,EAAK,MAAM,EAAE,QACpD,CAChB,CAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yEAO0DA,EAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAYzCC,EAAeD,EAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA,qDAIZA,EAAK,cAAc,MAChEA,EAAK,IACN;AAAA;AAAA;AAAA,qDAG8CC,EACrCD,EAAK,QACrB,CAAe;AAAA;AAAA;AAAA,qDAGsCC,EACrCD,EAAK,MACrB,CAAe;AAAA;AAAA;AAAA,SAIV,EACA,KAAK,EAAE,EACJE,EAAa,SAAS,cAAc,eAAe,EACzDA,EAAW,UAAYH,EACvBmB,IACIjC,IAAiB,GAAKR,EAAW,cAAgB,aAAcA,EAAW,mBAC5E,YACA,yCAAyCwB,EACvClB,EAAS,CAAC,EAAE,QACb,CAAA,SACL,EACEL,EAAY,UAAU,OAAO,WAAW,EACpC,OAAO,OAAO,OAAS,MACzBwB,EAAW,UAAU,IAAI,WAAW,EAElC,OAAO,OAAO,OAAS,KAAO,OAAO,OAAO,MAAQ,MACtDA,EAAW,UAAU,IAAI,UAAU,CAEvC,CAEA,SAASe,GAAwB,CAC/B,MAAMb,EAAiB,CAAA,EAEvB,GADA/B,EAAkB,UAAU,OAAO,UAAU,EACzCQ,EAAa,EAAG,CAClB,QAASwB,EAAI,EAAGA,GAAKxB,EAAYwB,IAC/BD,EAAe,KACb,kCACEC,IAAMpB,EAAe,SAAW,EAC1C,KAAaoB,CAAC,SACd,EAEIhC,EAAkB,UAAY+B,EAAe,KAAK,EAAE,EACpD,MAAME,EACJ,SAAS,uBAAuB,mBAAmB,EACrD,QAASD,EAAI,EAAGA,EAAIC,EAAkB,OAAQD,IAC5CC,EAAkBD,CAAC,EAAE,iBAAiB,QAAS,UAAY,CACzDc,EAAyBd,EAAI,CAAC,CACtC,CAAO,GAECxB,EAAa,IAAM,OAAO,OAAO,MAAQ,KAElCA,EAAa,IAAM,OAAO,OAAO,MAAQ,OAClDR,EAAkB,UAAU,IAAI,UAAU,CAEhD,MACIA,EAAkB,UAAY,EAElC,CAEA,SAAS8C,EAAyBX,EAAe,CAC3CA,IAAkBvB,IAGtBA,EAAeuB,EACfK,IACF,CCxTA,MAAMO,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAa,SAAS,eAAe,aAAa,EAElDC,EAAW,mDAEjBF,EAAiB,iBAAiB,SAAUG,CAAY,EAExD,eAAeA,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpB,MAAMC,EAAYJ,EAAW,MAE7B,GAAI,CAACK,EAAcD,CAAS,EAAG,CAC7B3B,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,qBACf,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAML,EAAW,MAAMC,EAAM,KAAK4B,EAAU,CAAE,MAAOG,CAAS,CAAE,EAChEL,EAAiB,MAAK,EAClB3B,EAAS,SAAW,KACtBK,EAAS,KAAK,CACZ,MAAO,OACP,QACE,uLACV,CAAO,CAEJ,OAAQL,EAAU,CACjB,GAAIA,EAAS,UAAY,sCAAuC,CAC9D2B,EAAiB,MAAK,EACtBtB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6BACjB,CAAO,EACD,MACN,MACMA,EAAS,KAAK,CACZ,MAAO,OACP,QACE,sEACV,CAAO,CAEJ,CACH,CAEA,SAAS4B,EAAcC,EAAO,CAE5B,MADc,2CACD,KAAKA,CAAK,CACzB"}